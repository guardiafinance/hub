openapi: 3.0.1
info:
  title: Introdução
  description: |
    Otimize a gestão financeira da sua operação com eficiência e segurança.
    Organize livros razão, monitore transações e saldos em tempo real, e
    consolide dados com precisão. Automatize processos com Smart Transactions,
    garantindo controle total, rastreabilidade e integridade das transações financeiras.

    Saiba mais sobre o Ledger Kernel Engine [aqui](https://hub.guardia.finance/docs/modules<https://{tenant_id}.guardia.finance/lke).

    ## Comunidade

    Faça parte da nossa comunidade no WhatsApp.


    [![WhatsApp](https://img.shields.io/badge/WhatsApp-25D366?style=for-the-badge&logo=whatsapp&logoColor=white)](https://chat.whatsapp.com/BcngCJx3ytzHy9AeZWzRg2)
  version: 1.0.0
  contact:
    name: Guardia
    url: https://www.guardia.finance/#contact-us
    email: contato@guardia.finance
  x-logo:
    url: /img/banner-lke.svg
    altText: Ledger Kernel Engine Banner
  x-dark-logo:
    url: /img/banner-lke.svg
    altText: Ledger Kernel Engine Banner
tags:
  - name: Ledgers
    description: |
      Gerencie os livros razão da sua empresa. Crie, atualize e exclua ledgers,
      além de consultar informações detalhadas sobre cada um.
  - name: Chapters
    description: >
      Organize os livros razão em capítulos para facilitar a gestão e análise.

      Crie, atualize e exclua capítulos, além de consultar informações
      detalhadas sobre cada um.
  - name: Assets
    description: |
      Gerencie os ativos da sua empresa. Crie, atualize e exclua ativos,
      além de consultar informações detalhadas sobre cada um.
  - name: Transactions
    description: |
      Registre transações financeiras relacionadas a um livro razão ou capítulo.
paths:
  /v1/ledgers:
    post:
      summary: Cria um novo ledger
      description: Cria um novo ledger com os dados fornecidos.
      operationId: create_ledger
      tags:
        - Ledgers
      parameters:
        - $ref: "#/paths/~1v1~1books/post/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      requestBody:
        required: true
        content:
          application/vnd.guardia.v1+json:
            schema:
              $ref: "#/components/schemas/LedgerCreateRequest"
      responses:
        "201":
          description: Ledger criado com sucesso.
          headers:
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Idempotency-Key:
              $ref: "#/components/headers/Idempotency-Key"
            Content-Digest:
              $ref: "#/components/headers/Content-Digest"
            Last-Modified:
              $ref: "#/components/headers/Last-Modified"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/Ledger"
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security:
        - BearerAuth: []
    get:
      summary: Lista todos os ledgers
      deprecated: false
      description: Obténha uma lista de ledgers disponíveis para a organização
        filtrando por metadata ou incluindo itens descartados.
      operationId: list_ledgers
      tags:
        - Ledgers
      parameters:
        - $ref: "#/paths/~1v1~1books/get/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/1"
        - $ref: "#/paths/~1v1~1books/get/parameters/4"
        - $ref: "#/paths/~1v1~1books/get/parameters/5"
        - $ref: "#/paths/~1v1~1books/get/parameters/6"
        - $ref: "#/paths/~1v1~1books/get/parameters/7"
        - $ref: "#/paths/~1v1~1books/get/parameters/8"
        - $ref: "#/paths/~1v1~1books/get/parameters/9"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      responses:
        "200":
          description: Lista de ledgers
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/ListOfLedgers"
                  pagination:
                    $ref: "#/components/schemas/Pagination"
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Link:
              $ref: "#/components/headers/Link"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
      x-apidog-folder: Ledgers
      x-apidog-status: developing
      x-apidog-maintainer: Fernando Seguim
      x-run-in-apidog: https://app.apidog.com/web/project/719079/apis/api-11718079-run
  /v1/ledgers/{entity_id}:
    get:
      summary: Obtém um ledger específico
      deprecated: false
      description: ""
      operationId: get_ledger
      tags:
        - Ledgers
      parameters:
        - $ref: "#/paths/~1v1~1books~1%7Bentity_id%7D/get/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      responses:
        "200":
          description: Dados do ledger.
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/Ledger"
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
          x-apidog-name: OK
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
      x-apidog-folder: Ledgers
      x-apidog-status: developing
      x-apidog-maintainer: Fernando Seguim
      x-run-in-apidog: https://app.apidog.com/web/project/719079/apis/api-11718081-run
    patch:
      summary: Atualize um ledger específico
      description: >
        :::warning

        Ao atualizar um metadata, quando o valor for `null`, caso a propriedade
        exista, ela será considerada para remoção, conforme a especificação do
        Json Merge Patch [RFC
        7386](https://datatracker.ietf.org/doc/html/rfc7386).

        :::
      operationId: update_ledger
      tags:
        - Ledgers
      parameters:
        - $ref: "#/paths/~1v1~1books~1%7Bentity_id%7D/get/parameters/0"
        - $ref: "#/paths/~1v1~1books/post/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      requestBody:
        required: true
        content:
          application/vnd.guardia.v1+json:
            schema:
              $ref: "#/components/schemas/LedgerUpdateRequest"
      responses:
        "200":
          description: Ledger atualizado com sucesso.
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Digest:
              $ref: "#/components/headers/Content-Digest"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Idempotency-Key:
              $ref: "#/components/headers/Idempotency-Key"
            Last-Modified:
              $ref: "#/components/headers/Last-Modified"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/Ledger"
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
      x-apidog-folder: Ledgers
      x-apidog-status: developing
      x-apidog-maintainer: Fernando Seguim
      x-run-in-apidog: https://app.apidog.com/web/project/719079/apis/api-11718081-run
    delete:
      summary: Descarta um ledger específico
      deprecated: false
      description: |
        :::note
        Se o ledger possuir transações, o descarte não será permitido.
        :::
      operationId: delete_ledger
      tags:
        - Ledgers
      parameters:
        - $ref: "#/paths/~1v1~1books~1%7Bentity_id%7D/get/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      responses:
        "204":
          description: Ledger descartado com sucesso.
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Digest:
              $ref: "#/components/headers/Content-Digest"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Last-Modified:
              $ref: "#/components/headers/Last-Modified"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
          x-apidog-name: No Content
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
      x-apidog-folder: Ledgers
      x-apidog-status: developing
      x-apidog-maintainer: Fernando Seguim
      x-run-in-apidog: https://app.apidog.com/web/project/719079/apis/api-11718082-run
  /v1/ledgers/{entity_id}/assets:
    post:
      summary: Adiciona um asset ao ledger
      description: Associa um asset existente ao ledger especificado através do código
        do asset.
      operationId: add_asset_to_ledger
      tags:
        - Ledgers
      parameters:
        - $ref: "#/paths/~1v1~1books~1%7Bentity_id%7D/get/parameters/0"
        - $ref: "#/paths/~1v1~1books/post/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      requestBody:
        required: true
        content:
          application/vnd.guardia.v1+json:
            schema:
              type: object
              required:
                - code
              properties:
                code:
                  type: string
                  description: "Código do asset que será associado ao ledger (ex.: BRL, BTC)."
      responses:
        "201":
          description: Asset associado com sucesso.
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Digest:
              $ref: "#/components/headers/Content-Digest"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Idempotency-Key:
              $ref: "#/components/headers/Idempotency-Key"
            Last-Modified:
              $ref: "#/components/headers/Last-Modified"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/LedgerAssetBinding"
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
    delete:
      summary: Remove um asset do ledger
      description: Remove a associação de um asset existente do ledger especificado
        através do código do asset.
      operationId: remove_asset_from_ledger
      tags:
        - Ledgers
      parameters:
        - $ref: "#/paths/~1v1~1books~1%7Bentity_id%7D/get/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      requestBody:
        required: true
        content:
          application/vnd.guardia.v1+json:
            schema:
              type: object
              required:
                - code
              properties:
                code:
                  type: string
                  description: Código do asset que será removido do ledger.
      responses:
        "204":
          description: Asset removido com sucesso.
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Last-Modified:
              $ref: "#/components/headers/Last-Modified"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
  /v1/chapters:
    post:
      summary: Cria um novo chapter
      deprecated: false
      description: |
        Permite criar uma segmentação da ledger em ***Chapters*** (Capítulos),
        organizando transações e saldos por critérios específicos, como unidade
        de negócio ou centro de custo, para facilitar análises, relatórios e
        auditorias com maior precisão e flexibilidade.
      operationId: create_chapter
      tags:
        - Chapters
      parameters:
        - $ref: "#/paths/~1v1~1books/post/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      requestBody:
        content:
          application/vnd.guardia.v1+json:
            schema:
              $ref: "#/components/schemas/ChapterCreateRequest"
            example:
              external_entity_id: fff78a0d3b5146a1ae80007e3d316714
              name: Investimentos
              description: Unidade de Negócio voltada para produtos de Investimentos.
              ledger_entity_id: f636cb1c46c4468e93c384a12530ee30
              metadata:
                foo: bar
      responses:
        "201":
          description: Chapter criado
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Digest:
              $ref: "#/components/headers/Content-Digest"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Idempotency-Key:
              $ref: "#/components/headers/Idempotency-Key"
            Last-Modified:
              $ref: "#/components/headers/Last-Modified"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/Chapter"
              example:
                data:
                  entity_id: "6683756247371778"
                  entity_type: CHAPTER
                  external_entity_id: fff78a0d3b5146a1ae80007e3d316714
                  version: 0
                  name: Investiments
                  description: Unidade de Negocio para produtos de Investimentos.
                  created_at: 2024-11-17T00:00:00.000Z
                  updated_at: 2024-11-17T00:00:00.000Z
                  metadata:
                    foo: bar
          x-apidog-name: Created
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
      x-apidog-folder: Chapters
      x-apidog-status: developing
      x-apidog-maintainer: Fernando Seguim
      x-run-in-apidog: https://app.apidog.com/web/project/719079/apis/api-11718084-run
    get:
      summary: Lista todos os chapters
      deprecated: false
      description: ""
      operationId: list_chapters
      tags:
        - Chapters
      parameters:
        - $ref: "#/paths/~1v1~1books/get/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/1"
        - $ref: "#/paths/~1v1~1books/get/parameters/4"
        - $ref: "#/paths/~1v1~1books/get/parameters/5"
        - $ref: "#/paths/~1v1~1books/get/parameters/6"
        - $ref: "#/paths/~1v1~1books/get/parameters/7"
        - $ref: "#/paths/~1v1~1books/get/parameters/8"
        - $ref: "#/paths/~1v1~1books/get/parameters/9"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      responses:
        "200":
          description: Lista de chapters.
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/ListOfChapters"
                  pagination:
                    $ref: "#/components/schemas/Pagination"
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
      x-apidog-folder: Chapters
      x-apidog-status: developing
      x-apidog-maintainer: Fernando Seguim
      x-run-in-apidog: https://app.apidog.com/web/project/719079/apis/api-11718083-run
  /v1/chapters/{entity_id}:
    get:
      summary: Obtém um chapter específico
      deprecated: false
      description: ""
      operationId: get_chapter
      tags:
        - Chapters
      parameters:
        - $ref: "#/paths/~1v1~1books~1%7Bentity_id%7D/get/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      responses:
        "200":
          description: Dados do chapter.
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/Chapter"
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
          x-apidog-name: OK
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
      x-apidog-folder: Chapters
      x-apidog-status: developing
      x-apidog-maintainer: Fernando Seguim
      x-run-in-apidog: https://app.apidog.com/web/project/719079/apis/api-11718085-run
    patch:
      summary: Atualiza um chapter específico
      deprecated: false
      description: >
        :::warning

        Ao atualizar um metadata, quando o valor for `null`, caso a propriedade
        exista, ela será considerada para remoção, conforme a especificação do
        Json Merge Patch [RFC
        7386](https://datatracker.ietf.org/doc/html/rfc7386).

        :::
      operationId: update_chapter
      tags:
        - Chapters
      parameters:
        - $ref: "#/paths/~1v1~1books~1%7Bentity_id%7D/get/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/post/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      requestBody:
        content:
          application/vnd.guardia.v1+json:
            schema:
              $ref: "#/components/schemas/ChapterUpdateRequest"
            example:
              external_entity_id: fff78a0d3b5146a1ae80007e3d316714
              name: Investimentos
              description: Unidade de Negócio voltada para produtos de Investimentos.
              ledger_entity_id: f636cb1c46c4468e93c384a12530ee30
              tags:
                - guardia
              metadata:
                foo: bar
      responses:
        "200":
          description: Chapter atualizado
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/Chapter"
              example:
                data:
                  entity_id: "6683756247371778"
                  entity_type: CHAPTER
                  external_entity_id: fff78a0d3b5146a1ae80007e3d316714
                  version: 0
                  name: Receivables
                  description: Unidade de Negocio para produtos de Investimentos.
                  created_at: 2024-11-17T00:00:00.000Z
                  updated_at: 2024-11-17T00:00:00.000Z
                  metadata:
                    foo: bar
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Digest:
              $ref: "#/components/headers/Content-Digest"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Idempotency-Key:
              $ref: "#/components/headers/Idempotency-Key"
            Last-Modified:
              $ref: "#/components/headers/Last-Modified"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
          x-apidog-name: OK
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
      x-apidog-folder: Chapters
      x-apidog-status: developing
      x-apidog-maintainer: Fernando Seguim
      x-run-in-apidog: https://app.apidog.com/web/project/719079/apis/api-11718086-run
    delete:
      summary: Descarta um chapter específico
      deprecated: false
      description: |
        :::note
        Se o chapter possuir transações, o descarte não será permitido.
        :::
      operationId: delete_chapter
      tags:
        - Chapters
      parameters:
        - $ref: "#/paths/~1v1~1books~1%7Bentity_id%7D/get/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      responses:
        "204":
          description: Chapter excluído com sucesso
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Digest:
              $ref: "#/components/headers/Content-Digest"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Last-Modified:
              $ref: "#/components/headers/Last-Modified"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
          x-apidog-name: No Content
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
      x-apidog-folder: Chapters
      x-apidog-status: developing
      x-apidog-maintainer: Fernando Seguim
      x-run-in-apidog: https://app.apidog.com/web/project/719079/apis/api-11718087-run
  /v1/assets:
    post:
      summary: Criar um novo asset
      deprecated: false
      description: |
        Um **asset** (ou ativo) é um recurso de valor econômico que pode ser
        possuído ou controlado por uma entidade, indivíduo ou instituição. No
        contexto financeiro, um ativo pode ser:


        - **Fiduciário**, quando seu valor é respaldado por um emissor de
        confiança, como moedas emitidas por governos ou títulos lastreados.

        - **Não fiduciário**, quando seu valor deriva de características
        intrínsecas ou da demanda do mercado. Entre esses ativos, podem estar
        commodities, criptomoedas e bens tangíveis, como um carro ou até mesmo
        contas (pedras historicamente utilizadas como meio de troca).


        Os **assets fiduciários**, baseados na **ISO 4712**, já estão
        disponíveis para uso no **Guardia**, mas você pode criar novos assets
        conforme sua necessidade. Os demais assets podem ser baseados em
        especificações como ISO 10962, MIC, ISIN ou um padrão interno da
        instituição.
      operationId: create_asset
      tags:
        - Assets
      parameters:
        - $ref: "#/paths/~1v1~1books/post/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
      requestBody:
        content:
          application/vnd.guardia.v1+json:
            schema:
              $ref: "#/components/schemas/AssetCreateRequest"
      responses:
        "201":
          description: Asset criado
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Digest:
              $ref: "#/components/headers/Content-Digest"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Idempotency-Key:
              $ref: "#/components/headers/Idempotency-Key"
            Last-Modified:
              $ref: "#/components/headers/Last-Modified"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/Asset"
              example:
                data:
                  entity_id: "6683756247371778"
                  entity_type: ASSET
                  external_entity_id: e9ad6a8ac4ce4a0b8e845c5d89e24322
                  version: 0
                  code: INT01
                  number: "2003202501"
                  exponent: 10
                  is_fiat: false
                  locations:
                    - NONE
                  created_at: 2024-11-17T00:00:00.000Z
                  updated_at: 2024-11-17T00:00:00.000Z
          x-apidog-name: Created
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
      x-apidog-folder: Assets
      x-apidog-status: developing
      x-apidog-maintainer: Fernando Seguim
      x-run-in-apidog: https://app.apidog.com/web/project/719079/apis/api-14888485-run
    get:
      summary: Lista todos os assets
      deprecated: false
      description: Obtém uma lista de assets disponíveis para a organização filtrando
        por metadata ou incluindo itens descartados.
      operationId: list_assets
      tags:
        - Assets
      parameters:
        - $ref: "#/paths/~1v1~1books/get/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/1"
        - name: asset_codes
          in: query
          description: >
            Uma lista de códigos de assets separados por vírgulas. Para ativos
            fiduciários, use códigos ISO 4217

            (ex: BRL, USD, EUR). Para outros tipos de ativos, use o código
            definido

            na criação do asset.
          required: false
          example: BRL,USD,EUR
          schema:
            type: string
        - name: asset_numbers
          in: query
          description: >
            Uma lista de números de identificação de assets separados por
            vírgulas. Este número pode ser baseado

            em especificações como ISO 10962, MIC, ISIN ou um padrão interno da

            instituição.
          required: false
          example: 986,840,978
          schema:
            type: string
        - $ref: "#/paths/~1v1~1books/get/parameters/4"
        - $ref: "#/paths/~1v1~1books/get/parameters/5"
        - $ref: "#/paths/~1v1~1books/get/parameters/6"
        - $ref: "#/paths/~1v1~1books/get/parameters/7"
        - $ref: "#/paths/~1v1~1books/get/parameters/8"
        - $ref: "#/paths/~1v1~1books/get/parameters/9"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      responses:
        "200":
          description: Lista de assets
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/ListOfAssets"
                  pagination:
                    $ref: "#/components/schemas/Pagination"
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Link:
              $ref: "#/components/headers/Link"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
      x-apidog-folder: Assets
      x-apidog-status: developing
      x-apidog-maintainer: Fernando Seguim
      x-run-in-apidog: https://app.apidog.com/web/project/719079/apis/api-14888484-run
  /v1/assets/{entity_id}:
    get:
      summary: Obtém um asset específico
      deprecated: false
      description: >
        Obtém os detalhes de um asset específico usando seu `entity_id` ou
        `external_entity_id`.

        O asset pode ser um ativo fiduciário (baseado na ISO 4712) ou não
        fiduciário.
      operationId: get_asset
      tags:
        - Assets
      parameters:
        - $ref: "#/paths/~1v1~1books~1%7Bentity_id%7D/get/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      responses:
        "200":
          description: Dados do asset.
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/Asset"
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
    patch:
      summary: Atualiza um asset específico
      description: >
        Atualiza os dados como Nome, Código, Número, Expoente, Locations e
        Metadata de um asset existente.

        <br />

        :::warning

        Ao atualizar um metadata, quando o valor for `null`, caso a propriedade
        exista, ela será considerada para remoção, conforme a especificação do
        Json Merge Patch [RFC
        7386](https://datatracker.ietf.org/doc/html/rfc7386).

        :::
      operationId: update_asset
      tags:
        - Assets
      parameters:
        - $ref: "#/paths/~1v1~1books~1%7Bentity_id%7D/get/parameters/0"
        - $ref: "#/paths/~1v1~1books/post/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      requestBody:
        required: true
        content:
          application/vnd.guardia.v1+json:
            schema:
              $ref: "#/components/schemas/AssetUpdateRequest"
      responses:
        "200":
          description: Asset atualizado com sucesso.
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Digest:
              $ref: "#/components/headers/Content-Digest"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Idempotency-Key:
              $ref: "#/components/headers/Idempotency-Key"
            Last-Modified:
              $ref: "#/components/headers/Last-Modified"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/Asset"
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
    delete:
      summary: Descarta um asset específico
      deprecated: false
      description: >
        :::note

        Se o asset estiver sendo utilizado em transações, o descarte não será
        permitido.

        :::
      operationId: delete_asset
      tags:
        - Assets
      parameters:
        - $ref: "#/paths/~1v1~1books~1%7Bentity_id%7D/get/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      responses:
        "204":
          description: Asset excluído com sucesso
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Digest:
              $ref: "#/components/headers/Content-Digest"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Last-Modified:
              $ref: "#/components/headers/Last-Modified"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
      x-apidog-folder: Assets
      x-apidog-status: developing
      x-apidog-maintainer: Fernando Seguim
  /v1/books:
    post:
      summary: Cria um novo book
      description: >
        O Book é uma entidade fundamental que representa uma conta contábil no
        LKe.

        Com sua natureza definida como credora ou devedora, ele organiza e
        registra

        lançamentos financeiros de maneira estruturada, rastreável e segregada
        conforme

        a finalidade contábil ou operacional.


        Como unidade básica na estrutura do ledger, os Books proporcionam um
        controle

        preciso sobre saldos, movimentações e conciliações.


        Todo Book deve estar vinculado a um Asset, que representa a moeda
        utilizada

        (seja fiduciária ou não) nas transações. Além disso, pode ser associado
        a um

        Chapter do Ledger para otimizar a gestão e o controle financeiro.
      operationId: create_book
      tags:
        - Books
      parameters:
        - name: Idempotency-Key
          in: header
          description: Chave para garantir idempotência da requisição.
          required: true
          schema:
            type: string
            format: uuid
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      requestBody:
        required: true
        content:
          application/vnd.guardia.v1+json:
            schema:
              $ref: "#/components/schemas/BookCreateRequest"
      responses:
        "201":
          description: Book criado com sucesso.
          headers:
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Idempotency-Key:
              $ref: "#/components/headers/Idempotency-Key"
            Content-Digest:
              $ref: "#/components/headers/Content-Digest"
            Last-Modified:
              $ref: "#/components/headers/Last-Modified"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/Book"
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security:
        - BearerAuth: []
    get:
      summary: Lista todos os books
      description: Obtém uma lista de books disponíveis para a organização filtrando
        por metadata, moeda (asset_codes) ou chapters (chapter_ids), além de
        incluir itens descartados.
      operationId: list_books
      tags:
        - Books
      parameters:
        - name: entity_ids
          in: query
          description: >
            Uma lista de IDs de entidades no formato UUIDv7 separados por
            vírgulas. Ex.:

            `entity_ids={entity_id},{entity_id},{entity_id}`. Espaços em branco

            entre as vírgulas serão ignorados.
          required: false
          example: 018f74a6e3b270ccbf248a4b012f5f3e,018f74a6e3b270ccbf248a4b012f5f3f,018f74a6e3b270ccbf248a4b012f5f40
          schema:
            type: string
            pattern: ^([0-9a-f]{8}-[0-9a-f]{4}-7[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12},)*[0-9a-f]{8}-[0-9a-f]{4}-7[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$
        - name: external_entity_ids
          in: query
          description: >
            Uma lista de IDs externos de entidades separados por vírgulas. Ex.:

            `external_entity_ids={external_id},{external_id},{external_id}`.
            Espaços em branco

            entre as vírgulas serão ignorados.
          required: false
          example: ext-123,ext-456,ext-789
          schema:
            type: string
        - name: asset_codes
          in: query
          description: >
            Uma lista de códigos de ativos (moedas) separados por vírgulas.
            Exemplo: 'USD,BRL,EUR'.
          required: false
          example: USD,BRL,EUR
          schema:
            type: string
        - name: chapter_ids
          in: query
          description: >
            Uma lista de IDs de chapters no formato UUIDv7 separados por
            vírgulas. Exemplo: 'id1,id2,id3'.
          required: false
          example: 018f74a6e3b270ccbf248a4b012f5f3e,018f74a6e3b270ccbf248a4b012f5f3f
          schema:
            type: string
        - name: $metadata.key
          in: query
          description: |
            Se você deseja listar os itens com uma metadata cuja chave seja
            `foo` e o valor seja `bar`, a consulta seria `$metadata.foo=bar`.
          required: false
          example: value
          schema:
            type: string
        - name: include_discarded
          in: query
          description: |
            Incluir os itens descartados no resultado da busca. O valor padrão é
            `false`.
          required: false
          example: "false"
          schema:
            type: string
        - name: page_size
          in: query
          description: Número de itens por página. Máximo de 100 itens.
          required: false
          example: 20
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: page_token
          in: query
          description: Token opaco que identifica a página atual.
          required: false
          schema:
            type: string
        - name: order_by
          in: query
          description: Campo usado para ordenação dos resultados. Apenas campos temporais
            são permitidos.
          required: false
          schema:
            type: string
            enum:
              - created_at
              - updated_at
              - reference_date
            default: created_at
        - name: sort
          in: query
          description: Direção da ordenação. Aceita 'asc' ou 'desc' (case insensitive).
          required: false
          schema:
            type: string
            enum:
              - asc
              - desc
            default: asc
        - name: Accept
          in: header
          description: |
            Tipo de contrato esperado na resposta da API. O valor padrão é
            `application/vnd.guardia.v1+json` ou a versao mais recente.
          required: false
          example: application/vnd.guardia.v1+json
          schema:
            type: string
        - name: Accept-Language
          in: header
          description: >
            O idioma em que a API deve retornar as mensagens de erro. Use `en`

            para inglês americano, `es` para espanhol ou `pt-BR` para português
            brasileiro. O valor

            padrão é `en`.
          required: false
          example: en
          schema:
            type: string
        - name: Content-Type
          in: header
          description: |
            Tipo de contrato enviado na requisição para a API. O valor padrão é
            `application/vnd.guardia.v1+json` ou a versao mais recente.
          required: false
          example: application/vnd.guardia.v1+json
          schema:
            type: string
        - name: X-Grd-Correlation-Id
          in: header
          description: Identificador de correlação para rastreamento distribuído.
          required: false
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Lista de books
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/ListOfBooks"
                  pagination:
                    $ref: "#/components/schemas/Pagination"
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Link:
              $ref: "#/components/headers/Link"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
      x-apidog-folder: Books
      x-apidog-status: developing
      x-apidog-maintainer: Fernando Seguim
      x-run-in-apidog: https://app.apidog.com/web/project/719079/apis/api-14888487-run
  /v1/books/{entity_id}:
    get:
      summary: Obtém um book específico
      description: Obtém os detalhes de um book específico usando seu entity_id ou
        external_entity_id.
      operationId: get_book
      tags:
        - Books
      parameters:
        - name: entity_id
          in: path
          description: >
            Identificador único da entidade no formato UUIDv7. Alternativamente
            pode ser utilizado o

            `external_entity_id`.
          required: true
          schema:
            $ref: "#/components/schemas/UUIDv7"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      responses:
        "200":
          description: Dados do book.
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/Book"
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
    patch:
      summary: Atualiza um book específico
      description: >
        Atualiza os dados como Nome, Natureza, Ativo, Chapter e Metadata de um
        book existente.

        <br />

        :::warning

        Ao atualizar um metadata, quando o valor for `null`, caso a propriedade
        exista, ela será considerada para remoção, conforme a especificação do
        Json Merge Patch [RFC
        7386](https://datatracker.ietf.org/doc/html/rfc7386).

        :::
      operationId: update_book
      tags:
        - Books
      parameters:
        - $ref: "#/paths/~1v1~1books~1%7Bentity_id%7D/get/parameters/0"
        - $ref: "#/paths/~1v1~1books/post/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      requestBody:
        required: true
        content:
          application/vnd.guardia.v1+json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 3
                  maxLength: 128
                nature:
                  type: string
                  enum:
                    - CREDITOR
                    - DEBITOR
                asset:
                  type: string
                  minLength: 3
                  maxLength: 3
                  description: Código do ativo (aka. moeda) ao qual o book está associado.
                chapter:
                  $ref: "#/components/schemas/UUIDv7"
                  description: UUIDv7 do chapter ao qual o book pertence.
                metadata:
                  $ref: "#/components/schemas/Metadata"
      responses:
        "200":
          description: Book atualizado com sucesso.
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Digest:
              $ref: "#/components/headers/Content-Digest"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Idempotency-Key:
              $ref: "#/components/headers/Idempotency-Key"
            Last-Modified:
              $ref: "#/components/headers/Last-Modified"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
          content:
            application/vnd.guardia.v1+json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/Book"
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
    delete:
      summary: Descarta um book específico
      description: |
        :::note
        Se o book possuir transações, o descarte não será permitido.
        :::
      operationId: delete_book
      tags:
        - Books
      parameters:
        - $ref: "#/paths/~1v1~1books~1%7Bentity_id%7D/get/parameters/0"
        - $ref: "#/paths/~1v1~1books/get/parameters/10"
        - $ref: "#/paths/~1v1~1books/get/parameters/11"
        - $ref: "#/paths/~1v1~1books/get/parameters/12"
        - $ref: "#/paths/~1v1~1books/get/parameters/13"
      responses:
        "204":
          description: Book descartado com sucesso
          headers:
            Cache-Control:
              $ref: "#/components/headers/Cache-Control"
            Content-Digest:
              $ref: "#/components/headers/Content-Digest"
            Content-Language:
              $ref: "#/components/headers/Content-Language"
            Content-Length:
              $ref: "#/components/headers/Content-Length"
            Content-Type:
              $ref: "#/components/headers/Content-Type"
            Last-Modified:
              $ref: "#/components/headers/Last-Modified"
            Strict-Transport-Security:
              $ref: "#/components/headers/Strict-Transport-Security"
            X-Grd-Correlation-Id:
              $ref: "#/components/headers/X-Grd-Correlation-Id"
            X-Grd-Trace-Id:
              $ref: "#/components/headers/X-Grd-Trace-Id"
            X-RateLimit-Limit:
              $ref: "#/components/headers/X-RateLimit-Limit"
            X-RateLimit-Remaining:
              $ref: "#/components/headers/X-RateLimit-Remaining"
            X-RateLimit-Reset:
              $ref: "#/components/headers/X-RateLimit-Reset"
        "400":
          $ref: "#/components/responses/Error400"
        "401":
          $ref: "#/components/responses/Error401"
        "403":
          $ref: "#/components/responses/Error403"
        "404":
          $ref: "#/components/responses/Error404"
        "409":
          $ref: "#/components/responses/Error409"
        "422":
          $ref: "#/components/responses/Error422"
        "429":
          $ref: "#/components/responses/Error429"
        "500":
          $ref: "#/components/responses/Error500"
      security: []
      x-apidog-folder: Books
      x-apidog-status: developing
      x-apidog-maintainer: Fernando Seguim
components:
  headers:
    X-Grd-Trace-Id:
      description: Identificador único da requisição gerado pela infraestrutura Guardia.
      schema:
        type: string
        format: uuid
      example: 018f74a6e3b270ccbf248a4b012f5f3e
      required: true
    X-Grd-Correlation-Id:
      description: Identificador de correlação para rastreamento distribuído.
      schema:
        type: string
        format: uuid
      example: 018f74a6e3b270ccbf248a4b012f5f3e
      required: true
    X-Grd-Debug:
      description: Habilita informações estendidas de debug no payload da resposta.
      schema:
        type: boolean
      example: true
      required: false
    Content-Type:
      description: Tipo de contrato retornado.
      schema:
        type: string
      example: application/vnd.guardia.v1+json
      required: true
    Content-Length:
      description: Indica o tamanho, em bytes, do corpo da resposta retornado pela API.
      schema:
        type: string
      example: <length>
      required: true
    Content-Language:
      description: O idioma em que a API retorna as mensagens de erro. Use en para
        inglês americano, es para espanhol ou pt-BR para português brasileiro.
      schema:
        type: string
      example: en
      required: true
    Cache-Control:
      description: Controla o comportamento de cache para respostas HTTP. Deve ser
        'no-store' para dados sensíveis. Deve ser 'public' para respostas de
        sucesso sem dados sensíveis que podem ser compartilhadas, ou 'private'
        para respostas de sucesso sem dados sensíveis que não podem ser
        compartilhadas, seguido da diretiva 'max-age' determinando o tempo
        máximo de cache em segundos.
      schema:
        type: string
      example: public, max-age=900
      required: true
    Link:
      description: Fornece links de navegação HATEOAS para paginação.
      schema:
        type: string
      example: |
        <https://{tenant_id}.guardia.finance/api/v1/ledgers?page_token={first_page_token}>; rel="first",
        <https://{tenant_id}.guardia.finance/api/v1/ledgers?page_token={previous_page_token}>; rel="previous",
        <https://{tenant_id}.guardia.finance/api/v1/ledgers?page_token={next_page_token}>; rel="next",
        <https://{tenant_id}.guardia.finance/api/v1/ledgers?page_token={last_page_token}>; rel="last"
      required: false
    Content-Digest:
      description: Hash do payload usado para garantir integridade em requisições
        idempotentes.
      schema:
        type: string
      example: sha-256=<hash>
      required: true
    Idempotency-Key:
      description: Chave para garantir idempotência da requisição.
      schema:
        type: string
      example: 018f74a6e3b270ccbf248a4b012f5f3e
      required: true
    Last-Modified:
      description: Indica a última data de modificação de uma entidade.
      schema:
        type: string
        format: date-time
      example: Wed, 21 Oct 2015 07:28:00 GMT
      required: true
    Retry-After:
      description: Informa quanto tempo (em segundos) o cliente deve esperar antes de
        tentar novamente após um erro 429.
      schema:
        type: integer
        minimum: 1
      example: 60
      required: true
    X-RateLimit-Limit:
      description: Cota de requisições por segundos por cliente (org id + tenant id).
      schema:
        type: integer
      example: 30
      required: true
    X-RateLimit-Remaining:
      description: Cota de requisições restantes no mesmo segundo.
      schema:
        type: integer
      example: 10
      required: true
    X-RateLimit-Reset:
      description: Tempo restante em segundos para a próxima requisição.
      schema:
        type: integer
      example: 60
      required: true
    Strict-Transport-Security:
      description: Indica que o navegador deve acessar o site apenas por HTTPS.
      schema:
        type: string
      example: max-age=31536000; includeSubDomains
      required: true
  schemas:
    UUID:
      type: string
      format: uuid
      description: Identificador único universal no formato UUID.
      pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$
    UUIDv7:
      type: string
      format: uuid
      description: Identificador único universal no formato UUIDv7 (RFC 9562).
      pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-7[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$
    Ledger:
      type: object
      properties:
        entity_id:
          $ref: "#/components/schemas/UUIDv7"
        entity_type:
          type: string
          enum:
            - LEDGER
        external_entity_id:
          $ref: "#/components/schemas/ExternalEntityID"
        version:
          $ref: "#/components/schemas/Version"
        name:
          type: string
          description: O nome único e personalizado da ledger. Mínimo de 3 caractere e
            Máximo de 256 caracteres.
          minLength: 3
          maxLength: 128
        description:
          type: string
          description: Uma descrição personalizada da ledger. Mínimo de 3 caracteres e
            Máximo de 256 caracteres.
          minLength: 3
          maxLength: 256
        created_at:
          $ref: "#/components/schemas/DateTime"
          nullable: false
        updated_at:
          $ref: "#/components/schemas/DateTime"
          nullable: false
        discarded_at:
          $ref: "#/components/schemas/DateTime"
          nullable: true
        metadata:
          $ref: "#/components/schemas/Metadata"
    Chapter:
      type: object
      properties:
        entity_id:
          $ref: "#/components/schemas/UUIDv7"
        entity_type:
          type: string
          enum:
            - CHAPTER
        external_entity_id:
          $ref: "#/components/schemas/ExternalEntityID"
        version:
          $ref: "#/components/schemas/Version"
        name:
          type: string
        description:
          type: string
          nullable: true
        ledger_entity_id:
          $ref: "#/components/schemas/UUIDv7"
          description: |
            Identificador único da ledger associada ao chapter.
        created_at:
          $ref: "#/components/schemas/DateTime"
          nullable: false
        updated_at:
          $ref: "#/components/schemas/DateTime"
          nullable: false
        discarded_at:
          $ref: "#/components/schemas/DateTime"
          nullable: true
        metadata:
          $ref: "#/components/schemas/Metadata"
    Asset:
      type: object
      properties:
        entity_id:
          $ref: "#/components/schemas/UUIDv7"
        entity_type:
          type: string
          enum:
            - ASSET
        external_entity_id:
          $ref: "#/components/schemas/ExternalEntityID"
        version:
          $ref: "#/components/schemas/Version"
        code:
          type: string
          minLength: 3
          maxLength: 10
        number:
          type: string
          minLength: 3
          maxLength: 10
        exponent:
          type: number
          minimum: 0
          maximum: 10
        is_fiat:
          type: boolean
        locations:
          type: array
          items:
            type: string
        ledgers:
          type: array
          description: |
            Lista de identificadores únicos das ledgers associadas ao asset.
          items:
            $ref: "#/components/schemas/UUIDv7"
        created_at:
          $ref: "#/components/schemas/DateTime"
          nullable: false
        updated_at:
          $ref: "#/components/schemas/DateTime"
          nullable: false
        discarded_at:
          $ref: "#/components/schemas/DateTime"
          nullable: true
        metadata:
          $ref: "#/components/schemas/Metadata"
    LedgerAssetBinding:
      type: object
      description: Representa a associação entre um ledger e um asset, incluindo
        informações específicas do vínculo.
      properties:
        ledger_entity_id:
          $ref: "#/components/schemas/UUIDv7"
          description: Identificador único do ledger.
        asset_entity_id:
          $ref: "#/components/schemas/UUIDv7"
          description: Identificador único do asset.
        code:
          type: string
          description: Código do asset vinculado.
          minLength: 3
          maxLength: 10
        number:
          type: string
          description: Número de identificação do asset vinculado.
          minLength: 3
          maxLength: 10
        exponent:
          type: number
          description: Expoente do asset vinculado.
          minimum: 0
          maximum: 10
        binded_at:
          $ref: "#/components/schemas/DateTime"
          description: Data e hora em que o asset foi vinculado ao ledger.
    Metadata:
      type: object
      description: Os metadados a serem adicionados à entidade devem ser fornecidos
        como pares de chave-valor em um formato de objeto JSON, com chave e
        valor como strings. O tamanho maximo do objeto deve ser 1MB.
      additionalProperties:
        type: string
      maxProperties: 10
      example:
        foo: bar
    DateTime:
      type: string
      description: Data e hora no formato no formato ISO 8601 / RFC 3339 (UTC).
      format: date-time
      pattern: ^(?<year>[0-9]{4})-?(?<month>1[0-2]|0[1-9])-?(?<day>3[01]|0[1-9]|[12][0-9])T(?<hour>2[0-3]|[01][0-9]):?(?<minute>[0-5][0-9]):?(?<second>[0-5][0-9])(?:\.(?<fraction>[0-9]{1,9}))?Z$
    Error:
      type: object
      properties:
        code:
          type: string
          description: "O codigo do erro. Ex.: ERR400_INVALID_PARAMETER."
        reason:
          type: string
          description: "O movito do erro, quando conhecido. Ex.: INVALID_ENTITY_ID_FORMAT."
        message:
          type: string
          description: A mensagem que descreve o erro.
      required:
        - code
        - reason
        - message
    Errors:
      type: array
      description: Lista de erros retornados pela API. Cada erro contém um código,
        motivo e mensagem descritiva.
      items:
        $ref: "#/components/schemas/Error"
      example:
        - code: ERR400_INVALID_PARAMETER
          reason: INVALID_ENTITY_ID_FORMAT
          message: O parâmetro 'entity_id' é inválido. Deve ser um UUIDv7 válido.
        - code: ERR400_INVALID_PARAMETER
          reason: INVALID_EXTERNAL_ENTITY_ID_LENGTH
          message: O campo 'external_entity_id' deve ter até 36 caracteres.
    Version:
      type: integer
      minimum: 0
      maximum: 128
    EntityID:
      $ref: "#/components/schemas/UUIDv7"
    ExternalEntityID:
      type: string
      description: Identificador externo da entidade para interoperabilidade com
        outros sistemas.
      minLength: 1
      maxLength: 36
      example: ext-123
      nullable: true
    ErrorsResponse:
      type: object
      properties:
        errors:
          $ref: "#/components/schemas/Errors"
          description: Lista de erros.
        reference:
          type: string
          description: Link para a documentação.
          format: uri
      required:
        - errors
        - reference
    Debug:
      type: object
      properties:
        trace_id:
          type: string
          description: Identificador único da requisição.
        correlation_id:
          type: string
          description: Identificador de correlação para rastreamento distribuído.
        instance:
          type: string
          description: Identificador da instância que processou a requisição.
        timestamp:
          type: string
          description: Timestamp UNIX de quando a requisição foi recebida.
        duration:
          type: string
          description: Tempo total de processamento da requisição em milissegundos.
        memory:
          type: string
          description: Memória utilizada para processar a requisição em bytes.
        query:
          type: string
          description: Query string da requisição, se disponível.
        params:
          type: string
          description: Parâmetros de rota utilizados, se houver.
        external_ip:
          type: string
          description: IP externo da requisição do cliente.
    Pagination:
      type: object
      properties:
        page_size:
          type: integer
          description: Número de itens retornados na página atual.
        total_count:
          type: integer
          description: Número total de registros para a consulta original.
        next_page_token:
          type: string
          description: Token para recuperar a próxima página.
        previous_page_token:
          type: string
          description: Token para recuperar a página anterior.
        first_page_token:
          type: string
          description: Token representando a primeira página do conjunto de dados.
        last_page_token:
          type: string
          description: Token para ir para a última página.
    ListOfLedgers:
      type: array
      items:
        $ref: "#/components/schemas/Ledger"
    ListOfChapters:
      type: array
      items:
        $ref: "#/components/schemas/Chapter"
    ListOfAssets:
      type: array
      items:
        $ref: "#/components/schemas/Asset"
    ListOfBooks:
      type: array
      items:
        $ref: "#/components/schemas/Book"
    ListOfEntityIDs:
      type: array
      items:
        $ref: "#/components/schemas/UUIDv7"
    LedgerCreateRequest:
      type: object
      properties:
        external_entity_id:
          $ref: "#/components/schemas/ExternalEntityID"
        name:
          type: string
          minLength: 3
          maxLength: 128
        description:
          type: string
          minLength: 3
          maxLength: 256
        metadata:
          $ref: "#/components/schemas/Metadata"
      required:
        - external_entity_id
        - name
    LedgerUpdateRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 3
          maxLength: 128
        description:
          type: string
          minLength: 3
          maxLength: 256
        metadata:
          $ref: "#/components/schemas/Metadata"
    ChapterCreateRequest:
      type: object
      properties:
        external_entity_id:
          $ref: "#/components/schemas/ExternalEntityID"
        name:
          type: string
        description:
          type: string
        ledger_entity_id:
          type: string
        metadata:
          $ref: "#/components/schemas/Metadata"
      required:
        - external_entity_id
        - name
        - ledger_entity_id
    ChapterUpdateRequest:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        metadata:
          $ref: "#/components/schemas/Metadata"
    AssetCreateRequest:
      type: object
      properties:
        external_entity_id:
          $ref: "#/components/schemas/ExternalEntityID"
        code:
          type: string
        number:
          type: string
        exponent:
          type: string
        is_fiat:
          type: boolean
        locations:
          type: array
          items:
            type: string
        ledgers:
          $ref: "#/components/schemas/ListOfEntityIDs"
      required:
        - external_entity_id
        - code
        - number
        - exponent
        - is_fiat
        - locations
        - ledgers
    AssetUpdateRequest:
      type: object
      properties:
        code:
          type: string
        number:
          type: string
        exponent:
          type: string
        is_fiat:
          type: boolean
        locations:
          type: array
          items:
            type: string
        metadata:
          $ref: "#/components/schemas/Metadata"
    Book:
      type: object
      properties:
        entity_id:
          $ref: "#/components/schemas/UUIDv7"
        entity_type:
          type: string
          enum:
            - BOOK
        external_entity_id:
          $ref: "#/components/schemas/ExternalEntityID"
        version:
          $ref: "#/components/schemas/Version"
        name:
          type: string
          minLength: 3
          maxLength: 128
          description: Nome único do book dentro do ledger.
        ledger:
          $ref: "#/components/schemas/UUIDv7"
          description: UUIDv7 do ledger ao qual o book pertence.
        nature:
          type: string
          enum:
            - CREDITOR
            - DEBITOR
          description: Natureza do book.
        created_at:
          $ref: "#/components/schemas/DateTime"
          nullable: false
        updated_at:
          $ref: "#/components/schemas/DateTime"
          nullable: false
        discarded_at:
          $ref: "#/components/schemas/DateTime"
          nullable: true
        metadata:
          $ref: "#/components/schemas/Metadata"
    BookCreateRequest:
      type: object
      properties:
        external_entity_id:
          $ref: "#/components/schemas/ExternalEntityID"
        name:
          type: string
          minLength: 3
          maxLength: 128
        ledger_entity_id:
          $ref: "#/components/schemas/UUIDv7"
        nature:
          type: string
          enum:
            - CREDITOR
            - DEBITOR
        asset:
          type: string
          description: Código do ativo (aka. moeda) ao qual o book esta associado.
          minLength: 3
          maxLength: 3
          example: USD
        metadata:
          $ref: "#/components/schemas/Metadata"
      required:
        - external_entity_id
        - name
        - ledger_entity_id
        - nature
        - asset
  responses:
    Error400:
      description: Requisição inválida.
      headers:
        X-Grd-Trace-Id:
          $ref: "#/components/headers/X-Grd-Trace-Id"
        X-Grd-Correlation-Id:
          $ref: "#/components/headers/X-Grd-Correlation-Id"
      content:
        application/vnd.guardia.v1+json:
          schema:
            $ref: "#/components/schemas/ErrorsResponse"
    Error401:
      description: Não autorizado.
      headers:
        X-Grd-Trace-Id:
          $ref: "#/components/headers/X-Grd-Trace-Id"
        X-Grd-Correlation-Id:
          $ref: "#/components/headers/X-Grd-Correlation-Id"
      content:
        application/vnd.guardia.v1+json:
          schema:
            $ref: "#/components/schemas/ErrorsResponse"
    Error403:
      description: Acesso proibido.
      headers:
        X-Grd-Trace-Id:
          $ref: "#/components/headers/X-Grd-Trace-Id"
        X-Grd-Correlation-Id:
          $ref: "#/components/headers/X-Grd-Correlation-Id"
      content:
        application/vnd.guardia.v1+json:
          schema:
            $ref: "#/components/schemas/ErrorsResponse"
    Error404:
      description: Recurso não encontrado.
      headers:
        X-Grd-Trace-Id:
          $ref: "#/components/headers/X-Grd-Trace-Id"
        X-Grd-Correlation-Id:
          $ref: "#/components/headers/X-Grd-Correlation-Id"
      content:
        application/vnd.guardia.v1+json:
          schema:
            $ref: "#/components/schemas/ErrorsResponse"
    Error409:
      description: Conflito.
      headers:
        X-Grd-Trace-Id:
          $ref: "#/components/headers/X-Grd-Trace-Id"
        X-Grd-Correlation-Id:
          $ref: "#/components/headers/X-Grd-Correlation-Id"
      content:
        application/vnd.guardia.v1+json:
          schema:
            $ref: "#/components/schemas/ErrorsResponse"
    Error422:
      description: Entidade não processável.
      headers:
        X-Grd-Trace-Id:
          $ref: "#/components/headers/X-Grd-Trace-Id"
        X-Grd-Correlation-Id:
          $ref: "#/components/headers/X-Grd-Correlation-Id"
      content:
        application/vnd.guardia.v1+json:
          schema:
            $ref: "#/components/schemas/ErrorsResponse"
    Error429:
      description: Muitas requisições.
      headers:
        X-Grd-Trace-Id:
          $ref: "#/components/headers/X-Grd-Trace-Id"
        X-Grd-Correlation-Id:
          $ref: "#/components/headers/X-Grd-Correlation-Id"
        Retry-After:
          $ref: "#/components/headers/Retry-After"
      content:
        application/vnd.guardia.v1+json:
          schema:
            $ref: "#/components/schemas/ErrorsResponse"
    Error500:
      description: Erro interno do servidor.
      headers:
        X-Grd-Trace-Id:
          $ref: "#/components/headers/X-Grd-Trace-Id"
        X-Grd-Correlation-Id:
          $ref: "#/components/headers/X-Grd-Correlation-Id"
      content:
        application/vnd.guardia.v1+json:
          schema:
            $ref: "#/components/schemas/ErrorsResponse"
